---
import Layout from '../layouts/Layout.astro';

interface PriceMap {
  INR: string;
  USD: string;
}

const plans: Array<{
  name: string;
  price: PriceMap | 'Custom';
  unit: string;
  description: string;
  features: string[];
  cta: string;
  highlighted: boolean;
}> = [
  {
    name: 'Starter',
    price: { INR: '5.99', USD: '0.07' },
    unit: '/min',
    description: 'Perfect for small businesses just getting started with AI calling.',
    features: [
      'Pay-as-you-go billing',
      'Up to 500 calls/month',
      'Basic AI voice agent',
      'Call recording & transcripts',
      'Email support',
      'Basic analytics dashboard',
    ],
    cta: 'Get Started',
    highlighted: false,
  },
  {
    name: 'Professional',
    price: { INR: '4.49', USD: '0.05' },
    unit: '/min',
    description: 'For growing teams that need more power and customization.',
    features: [
      'Everything in Starter',
      'Up to 5,000 calls/month',
      'Advanced AI with GPT-4',
      'Custom voice & scripts',
      'CRM integrations',
      'Priority support',
      'Advanced analytics & reporting',
      'A/B testing for scripts',
    ],
    cta: 'Start Free Trial',
    highlighted: true,
  },
  {
    name: 'Enterprise',
    price: 'Custom',
    unit: '',
    description: 'For large organizations with custom requirements and high volume.',
    features: [
      'Everything in Professional',
      'Unlimited calls',
      'Dedicated AI model training',
      'Custom API & webhooks',
      'Dedicated account manager',
      'SLA guarantees (99.95%)',
      'On-premise deployment option',
      'White-label solution',
    ],
    cta: 'Contact Sales',
    highlighted: false,
  },
];

const integrationCost = { INR: '16,999', USD: '199' };

const faqs = [
  {
    q: 'How does pay-as-you-go billing work?',
    a: 'You are charged only for the minutes your AI agent is actively on a call. There are no monthly minimums or hidden charges. Top up your account balance and start making calls instantly.',
  },
  {
    q: 'What does the one-time integration fee cover?',
    a: 'The integration fee covers initial setup, AI agent configuration, CRM integration, custom voice training, and onboarding. Complex integrations (multi-system, custom APIs, white-label) are quoted separately based on scope.',
  },
  {
    q: 'Can I switch plans anytime?',
    a: "Absolutely! You can upgrade or downgrade your plan at any time. Changes take effect immediately, and we'll prorate any differences.",
  },
  {
    q: 'Is there a free trial?',
    a: 'Yes! All new accounts get 50 free minutes to test the platform. No credit card required to start.',
  },
  {
    q: 'What languages are supported?',
    a: 'We currently support English, Hindi, Tamil, Telugu, Bengali, and 20+ other languages. Enterprise plans can include custom language models.',
  },
  {
    q: 'Do you support multiple currencies?',
    a: 'Yes! We support billing in INR and USD. Use the currency toggle on this page to see prices in your preferred currency. Enterprise clients can request other currencies.',
  },
];
---

<Layout title="Pricing" description="Simple, transparent pay-as-you-go pricing starting at ₹5.99/min. No hidden fees.">
  <!-- Hero -->
  <section class="relative pt-32 pb-16 overflow-hidden gradient-mesh">
    <div class="relative z-10 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
      <span class="text-sm font-semibold text-primary uppercase tracking-wider">Pricing</span>
      <h1 class="mt-3 text-4xl sm:text-5xl md:text-6xl font-black text-text">
        Simple, <span class="bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent">transparent</span
        > pricing
      </h1>
      <p class="mt-4 text-lg text-text-muted max-w-2xl mx-auto">
        Pay only for what you use. No surprises, no contracts, no hidden fees.
      </p>

      <!-- Currency Toggle -->
      <div class="mt-8 inline-flex items-center gap-1 p-1 rounded-full bg-surface-raised border border-border">
        <button
          id="btn-inr"
          class="px-5 py-2 rounded-full text-sm font-semibold bg-gradient-to-r from-primary to-secondary text-white transition-all"
          data-currency="INR"
        >
          ₹ INR
        </button>
        <button
          id="btn-usd"
          class="px-5 py-2 rounded-full text-sm font-semibold text-text-muted hover:text-text transition-all"
          data-currency="USD"
        >
          $ USD
        </button>
      </div>
    </div>
  </section>

  <!-- Pricing Cards -->
  <section class="pb-24 -mt-4">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="grid grid-cols-1 md:grid-cols-3 gap-8 max-w-6xl mx-auto">
        {
          plans.map((plan) => (
            <div
              class:list={[
                'relative rounded-2xl p-8 flex flex-col transition-all',
                plan.highlighted
                  ? 'bg-gradient-to-b from-primary/5 to-surface border-2 border-primary/30 shadow-xl shadow-primary/10'
                  : 'bg-surface border border-border hover:shadow-lg',
              ]}
            >
              {plan.highlighted && (
                <div class="absolute -top-4 left-1/2 -translate-x-1/2 px-4 py-1 bg-gradient-to-r from-primary to-secondary rounded-full text-xs font-bold text-white uppercase tracking-wider">
                  Most Popular
                </div>
              )}
              <h3 class="text-xl font-bold text-text">{plan.name}</h3>
              <p class="text-text-muted text-sm mt-2">{plan.description}</p>
              <div class="mt-6 mb-8">
                {plan.price === 'Custom' ? (
                  <span class="text-4xl font-black text-text">Custom</span>
                ) : (
                  <>
                    <span class="text-sm text-text-muted currency-symbol">₹</span>
                    <span
                      class="text-5xl font-black text-text price-value"
                      data-inr={(plan.price as PriceMap).INR}
                      data-usd={(plan.price as PriceMap).USD}
                    >
                      {(plan.price as PriceMap).INR}
                    </span>
                    <span class="text-text-muted">{plan.unit}</span>
                  </>
                )}
              </div>
              <ul class="space-y-3 mb-8 flex-1">
                {plan.features.map((feature) => (
                  <li class="flex items-start gap-3 text-sm">
                    <svg
                      class="w-5 h-5 text-green-500 shrink-0 mt-0.5"
                      fill="none"
                      stroke="currentColor"
                      viewBox="0 0 24 24"
                    >
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                    </svg>
                    <span class="text-text-muted">{feature}</span>
                  </li>
                ))}
              </ul>
              <a
                href="/contact"
                class:list={[
                  'block text-center px-6 py-3 rounded-full font-semibold transition-all hover:-translate-y-0.5',
                  plan.highlighted
                    ? 'bg-gradient-to-r from-primary to-secondary text-white hover:shadow-lg hover:shadow-primary/25'
                    : 'bg-surface-raised text-text border border-border hover:border-primary/30',
                ]}
              >
                {plan.cta}
              </a>
            </div>
          ))
        }
      </div>
    </div>
  </section>

  <!-- One-time Integration Cost -->
  <section class="py-20 bg-surface-alt border-y border-border">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="max-w-4xl mx-auto">
        <div class="grid grid-cols-1 md:grid-cols-2 gap-8 items-center">
          <div>
            <span class="text-sm font-semibold text-primary uppercase tracking-wider">Setup</span>
            <h2 class="mt-2 text-3xl sm:text-4xl font-bold text-text">One-time Integration</h2>
            <p class="mt-3 text-text-muted leading-relaxed">
              Get fully set up with our team. We handle AI agent configuration, CRM integration, voice training, and
              complete onboarding.
            </p>
            <ul class="mt-6 space-y-3">
              <li class="flex items-center gap-3 text-sm text-text-muted">
                <svg class="w-5 h-5 text-green-500 shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"
                  ><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg
                >
                AI agent setup & training
              </li>
              <li class="flex items-center gap-3 text-sm text-text-muted">
                <svg class="w-5 h-5 text-green-500 shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"
                  ><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg
                >
                CRM & tool integrations
              </li>
              <li class="flex items-center gap-3 text-sm text-text-muted">
                <svg class="w-5 h-5 text-green-500 shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"
                  ><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg
                >
                Custom voice & script configuration
              </li>
              <li class="flex items-center gap-3 text-sm text-text-muted">
                <svg class="w-5 h-5 text-green-500 shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"
                  ><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg
                >
                Team onboarding & training session
              </li>
            </ul>
          </div>
          <div class="rounded-2xl gradient-border p-8 text-center bg-surface">
            <p class="text-sm text-text-muted mb-2">Starting from</p>
            <div>
              <span class="text-sm text-text-muted integration-symbol">$</span>
              <span
                class="text-5xl font-black text-text integration-price"
                data-inr={integrationCost.INR}
                data-usd={integrationCost.USD}>{integrationCost.USD}</span
              >
            </div>
            <p class="text-sm text-text-muted mt-2">one-time fee</p>
            <p class="text-xs text-text-light mt-4 leading-relaxed">
              Complex integrations (multi-system, custom APIs, white-label) are quoted based on scope. <a
                href="/contact"
                class="text-primary hover:underline">Request a quote</a
              >
            </p>
            <a
              href="/contact"
              class="mt-6 inline-block px-8 py-3 text-sm font-semibold text-white bg-gradient-to-r from-primary to-secondary rounded-full hover:shadow-lg hover:shadow-primary/25 transition-all hover:-translate-y-0.5"
            >
              Get Integration Quote
            </a>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Volume Discounts -->
  <section class="py-20 border-b border-border">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
      <h2 class="text-2xl sm:text-3xl font-bold text-text mb-4">Volume discounts available</h2>
      <p class="text-text-muted max-w-xl mx-auto mb-8">
        Making more than 10,000 calls per month? Contact us for custom volume pricing and dedicated support.
      </p>
      <a
        href="/contact"
        class="inline-block px-8 py-3 text-sm font-semibold text-text bg-surface-raised border border-border rounded-full hover:border-primary/30 hover:shadow-lg transition-all"
      >
        Talk to Sales
      </a>
    </div>
  </section>

  <!-- FAQ -->
  <section class="py-24">
    <div class="max-w-3xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="text-center mb-16">
        <span class="text-sm font-semibold text-primary uppercase tracking-wider">FAQ</span>
        <h2 class="mt-3 text-3xl sm:text-4xl font-bold text-text">Frequently asked questions</h2>
      </div>
      <div class="space-y-4">
        {
          faqs.map((faq) => (
            <details class="group rounded-2xl bg-surface border border-border overflow-hidden hover:shadow-md transition-shadow">
              <summary class="flex items-center justify-between cursor-pointer p-6 text-text font-medium hover:bg-surface-alt transition-colors">
                <span>{faq.q}</span>
                <svg
                  class="w-5 h-5 text-text-muted group-open:rotate-180 transition-transform shrink-0 ml-4"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                >
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
                </svg>
              </summary>
              <div class="px-6 pb-6 text-text-muted leading-relaxed">{faq.a}</div>
            </details>
          ))
        }
      </div>
    </div>
  </section>

  <script>
    const btnINR = document.getElementById('btn-inr');
    const btnUSD = document.getElementById('btn-usd');
    const priceValues = document.querySelectorAll('.price-value');
    const currencySymbols = document.querySelectorAll('.currency-symbol');
    const integrationPrice = document.querySelector('.integration-price');
    const integrationSymbol = document.querySelector('.integration-symbol');

    function setCurrency(currency: string) {
      const isINR = currency === 'INR';

      // Update toggle buttons
      if (isINR) {
        btnINR?.classList.add('bg-gradient-to-r', 'from-primary', 'to-secondary', 'text-white');
        btnINR?.classList.remove('text-text-muted');
        btnUSD?.classList.remove('bg-gradient-to-r', 'from-primary', 'to-secondary', 'text-white');
        btnUSD?.classList.add('text-text-muted');
      } else {
        btnUSD?.classList.add('bg-gradient-to-r', 'from-primary', 'to-secondary', 'text-white');
        btnUSD?.classList.remove('text-text-muted');
        btnINR?.classList.remove('bg-gradient-to-r', 'from-primary', 'to-secondary', 'text-white');
        btnINR?.classList.add('text-text-muted');
      }

      // Update per-minute prices
      priceValues.forEach((el) => {
        const htmlEl = el as HTMLElement;
        htmlEl.textContent = isINR ? htmlEl.dataset.inr! : htmlEl.dataset.usd!;
      });

      // Update symbols
      currencySymbols.forEach((el) => {
        el.textContent = isINR ? '₹' : '$';
      });

      // Update integration price
      if (integrationPrice && integrationSymbol) {
        const ipEl = integrationPrice as HTMLElement;
        ipEl.textContent = isINR ? ipEl.dataset.inr! : ipEl.dataset.usd!;
        integrationSymbol.textContent = isINR ? '₹' : '$';
      }
    }

    btnINR?.addEventListener('click', () => setCurrency('INR'));
    btnUSD?.addEventListener('click', () => setCurrency('USD'));
  </script>
</Layout>
